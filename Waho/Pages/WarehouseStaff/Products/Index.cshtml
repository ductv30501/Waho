@page
@model Waho.Pages.WarehouseStaff.Products.IndexModel

@{
    ViewData["Title"] = "Index";
}


<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Waho - Sản Phẩm</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Waho.styles.css" asp-append-version="true"/>
    <link href="~/css/modal.css" rel="stylesheet" asp-append-version="true" />
</head>
<body style="background: #f2f2f2">
    @*insert model*@
    <div class="modal">
        <div id="insert-product-modal">
            <form id="insertForm" asp-page="./Create" method="post">
                <div class="col-md-6">
                    <h4 class="text-right">Thêm sản phẩm mới</h4>
                    <div id="notification"></div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Tên sản phẩm</label>
                        <input name="productName" class="form-control input" type="text" placeholder="Nhập tên sản phẩm" required/>
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Giá nhập</label>
                        <input name="importPrice"  class="form-control input" type="number" min="1000" placeholder="Điền Giá nhập" required/>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Giá tại cửa hàng</label>
                        <input name="unitInStock"  type="number" min="1000" class="form-control input" placeholder="Nhập giá tại cửa hàng" required/>
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Thương hiệu</label>
                        <input name="trademark" type="text" class="form-control input" placeholder="Nhập tên thương hiệu" required/>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Trọng lượng</label>
                        <input name="weight" ype="number" min="1" class="form-control input" placeholder="Trọng lượng" required/>
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Vị trí</label><br />
                        <input name="location" type="text" class="form-control input" placeholder="Vị trí" required/>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Đơn vị</label>
                        <input name="unit" type="text" class="form-control input" placeholder="Đơn vị" required/>
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Đơn giá</label>
                        <input name="unitPrice" type="number" min="1000" class="form-control input" placeholder="Đơn giá" required/>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Định mức tồn min</label>
                        <input name="inventoryLevelMin" type="number" min="1" class="form-control input" placeholder="Định mức tồn min" required/>
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Định mức tồn max</label>
                        <input name="inventoryLevelMax" type="number" min="1" class="form-control input" placeholder="Định mức tồn max" required/>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Miêu tả</label>
                        <input name="description" type="text" class="form-control input" placeholder="nhập Miêu tả" required/>
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Loại sản phẩm</label>
                        <select name="subCategory" class="form-select input" aria-label="Default select example">
                            @foreach(var s in Model.subCategories){
                                <option value="@(s.SubCategoryId)">@s.SubCategoryName</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Nhà cung cấp</label>
                        <select name="supplierID" class="form-select input" aria-label="Default select example">
                            @foreach (var s in Model.suppliers)
                            {
                                <option value="@(s.SupplierId)">@s.CompanyName</option>
                            }
                        </select>
                    </div>
                    <div class="col-md-6 mt-4" >
                        <input id="checkBoxDate" class="checkBoxDate" type="checkbox" />
                        <label class="labels" onclick="showInsertDate()">Sản phẩm có hạn sử dụng</label>
                    </div>
                </div>
                <div class="row mt-2 insertDate" style="display:none" id="insertDate">
                    <div class="col-md-6">
                        <label class="labels">ngày sản xuất</label>
                        <input name="dateOfManufacture" id="dateOfManufactureInput" type="date" class="form-control input"/>
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Ngày hết hạn</label>
                        <input name="expiry" id="expiryInput" type="date" class="form-control input"/>
                    </div>
                </div>
                <div class="text-center mt-5">
                    <button id="btnSubmit" class="input-box button" type="button" style="padding: 5px;border-radius: 5px" onclick="this.form.submit()">Thêm sản phẩm</button>
                    <button style="margin-left: 10px;padding:5px;border-radius: 5px" class="input-box button btn btn-primary profile-button" type="button" onclick="modal('insert-product-modal', 0, 'scale(0)')">Đóng</button>
                </div>
            </form>
        </div>
    </div>
    @*end insert model*@
    @*More model*@
    <div class="modal">
        <div class="row" id="more-modal">
            <div class="col-lg-4">
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Tên sản phẩm" id="productName" onclick="showProperty('tbProductName')" class="col-lg-6 btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Tên sản phẩm</i>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Giá nhập" id="importPrice" onclick="showProperty('tbImportPrice')" class="col-lg-6 btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Giá nhập</i>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Đơn giá" id="unitPrice" onclick="showProperty('tbUnitPrice')" class="btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Đơn giá</i>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Giá tại kho" id="unitInStock" onclick="showProperty('tbUnitInStock')" class="col-lg-6 btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Giá tại kho</i>
                </div>

            </div>

            <div class="col-lg-4">
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Thương hiệu" id="trademark" onclick="showProperty('tbTrademark')" class="btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Thương hiệu</i>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Trọng lượng" id="weight" onclick="showProperty('tbWeight')" class="btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Trọng lượng</i>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Vị trí" id="location" onclick="showProperty('tbLocation')" class="btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Vị trí</i>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Đơn vị" id="unit" onclick="showProperty('tbUnit')" class="btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Đơn vị</i>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Định Mức tồn Min" id="inventoryLevelMin" onclick="showProperty('tbInventoryLevelMin')" class="btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Định Mức tồn Min</i>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Định Mức tồn Max" id="inventoryLevelMax" onclick="showProperty('tbInventoryLevelMax')" class="btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Định Mức tồn Max</i>
                </div>
                <div class="row">
                    <div class="col-lg-6">
                        <input type="checkbox" value="Mô tả" id="description" onclick="showProperty('tbDescription')" class="btn btn-primary w-75 m-2" />
                    </div>
                    <i class="col-lg-6">Mô tả</i>
                </div>
            </div>
            <div class="text-center mt-5">
                <button style="margin-left: 10px;padding:5px;border-radius: 5px" class="input-box button btn btn-primary profile-button" type="button" onclick="modal('more-modal', 1, 'scale(0)')">Đóng</button>
            </div>
        </div>
    </div>
    @*end more model*@
    @*update model*@
    <div class="modal">
        <div id="update-product-modal">
            <form id="insertForm" asp-page="./Edit" method="post">
                <div class="col-md-6">
                    <h4 class="text-right">Chi tiết sản phẩm</h4>
                    <div id="notification"></div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Tên sản phẩm</label>
                        <input name="productNameUpdate" id="productNameUpdate" class="form-control input" type="text" placeholder="Nhập tên sản phẩm" required />
                        <input name="productIDUpdate" id="productIDUpdate" type="hidden"/>
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Giá nhập</label>
                        <input name="importPriceUpdate" id="importPriceUpdate" class="form-control input" type="number" min="1000" placeholder="Điền Giá nhập" required />
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Giá tại cửa hàng</label>
                        <input name="unitInStockUpdate" id="unitInStockUpdate" type="number" min="1000" class="form-control input" placeholder="Nhập giá tại cửa hàng" required />
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Thương hiệu</label>
                        <input name="trademarkUpdate" id="trademarkUpdate" type="text" class="form-control input" placeholder="Nhập tên thương hiệu" required />
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Trọng lượng</label>
                        <input name="weightUpdate" id="weightUpdate" type="number" min="1" class="form-control input" placeholder="Trọng lượng" required />
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Vị trí</label><br />
                        <input name="locationUpdate" id="locationUpdateUpdate" type="text" class="form-control input" placeholder="Vị trí" required />
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Đơn vị</label>
                        <input name="unitUpdate" id="unitUpdate" type="text" class="form-control input" placeholder="Đơn vị" required />
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Đơn giá</label>
                        <input name="unitPriceUpdate" id="unitPriceUpdate" type="number" min="1000" class="form-control input" placeholder="Đơn giá" required />
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Định mức tồn min</label>
                        <input name="inventoryLevelMinUpdate" id="inventoryLevelMinUpdate" type="number" min="1" class="form-control input" placeholder="Định mức tồn min" required />
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Định mức tồn max</label>
                        <input name="inventoryLevelMaxUpdate" id="inventoryLevelMaxUpdate" type="number" min="1" class="form-control input" placeholder="Định mức tồn max" required />
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Miêu tả</label>
                        <input name="descriptionUpdate" id="descriptionUpdate" type="text" class="form-control input" placeholder="nhập Miêu tả" required />
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Loại sản phẩm</label>
                        <select name="subCategoryUpdate" id="subCategoryUpdate" class="form-select input" aria-label="Default select example">
                            @foreach (var s in Model.subCategories)
                            {
                                <option value="@(s.SubCategoryId)">@s.SubCategoryName</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">
                        <label class="labels">Nhà cung cấp</label>
                        <select name="supplierIDUpdate" id="supplierIDUpdate" class="form-select input" aria-label="Default select example">
                            @foreach (var s in Model.suppliers)
                            {
                                <option value="@(s.SupplierId)">@s.CompanyName</option>
                            }
                        </select>
                    </div>
                    <div class="col-md-6 mt-4">
                        <input id="checkBoxDateUpdate" name="checkBoxDateUpdate" class="checkBoxDate" type="checkbox" />
                        <label class="labels" onclick="showInsertDate()">Sản phẩm có hạn sử dụng</label>
                    </div>
                </div>
                <div class="row mt-2 insertDate" style="display:none" id="insertDate" >
                    <div class="col-md-6">
                        <label class="labels">ngày sản xuất</label>
                        <input name="dateOfManufactureUpdate" id="dateOfManufactureUpdate" type="date" class="form-control input" />
                    </div>
                    <div class="col-md-6">
                        <label class="labels">Ngày hết hạn</label>
                        <input name="expiryUpdate" id="expiryUpdate" type="date" class="form-control input" />
                    </div>
                </div>
                <div class="text-center mt-5">
                    <button id="btnSubmit" class="input-box button" type="button" style="padding: 5px;border-radius: 5px" onclick="this.form.submit()">Lưu</button>
                    <button id="btnSubmit" class="input-box button" type="button" style="padding: 5px;border-radius: 5px" onclick="DeleteProduct()">Xóa</button>
                    <button style="margin-left: 10px;padding:5px;border-radius: 5px" class="input-box button btn btn-primary profile-button" type="button" onclick="modal('update-product-modal', 2, 'scale(0)')">Đóng</button>
                </div>
            </form>
        </div>
    </div>
    @*end update model*@
    @*start filter*@
    <div style=" padding:10px;margin-top: 20px; border-radius: 10px;" class="col-lg-12">
        <form method="get" asp-page="./Index" asp-route-pageIndex="@Model.pageIndex" asp-route-pageSize="@Model.pageSize" asp-route-textSearch="@Model.textSearch" asp-route-subCategory="@Model.subCategoryID" style="margin-bottom: 20px; ">
            <div class="row">
                <div class="form-group col-md-1">
                    <label for="inputState">Hiển thị</label>
                    <select id="inputState" class="form-control" asp-for="@Model.pageSize" onchange="this.form.submit()">
                        <option value="5"> 5 hàng</option>
                        <option value="10">10 hàng</option>
                        <option value="15">15 hàng</option>
                        <option value="20">20 hàng</option>
                    </select>
                </div>
                <div class="form-group col-md-3">
                    <input type="text" asp-for="textSearch" class="form-control" placeholder="Nhập tên sản phẩm, loại sản phẩm, tên nhà cung cấp" style="margin-top: 20px">
                </div>
                <div class="form-group col-md-2" style="">
                    <button class="input-box button" type="submit" style="border-radius: 5px;padding: 5px 15px 5px 15px; margin-top: 20px">
                        <i style="" class="bi bi-search fa-lg"> Tìm kiếm</i>
                    </button>
                </div>
                <div class="form-group col-md-2">
                    <button style="padding: 5px 15px 5px 15px;border-radius: 5px;text-align: center; margin-top: 20px" class="input-box button" type="button" onclick="modal('insert-product-modal', 0, 'scale(1)');">
                        <i class="bi bi-person-plus-fill" asp-page="Create"> Thêm sản phẩm</i>
                    </button>
                </div>
                <div class="form-group col-md-2">
                    <button style="padding: 5px 15px 5px 15px;border-radius: 5px;text-align: center; margin-top: 20px" class="input-box button" type="button" onclick="modal('more-modal', 1, 'scale(1)');">
                        <i class="bi bi-person-plus-fill" asp-page="Create"> Xem Thêm </i>
                    </button>
                </div>
            </div>
        </form>
        @*end filter*@
        <div class="row ">
            <div class="col-lg-2" style="background-color: #fff; border-radius: 10px; padding:10px;margin-right: 10px">
                <div class="row">
                    <form method="get" asp-page="./Index" id="subCategoryForm">
                        <div class="text-center">Loại sản phẩm</div>
                        <ul class="w-75 rounded-2 list-inline" style="padding-left:30px; padding-top:20px; font-size: small">
                            @foreach (var item in Model.subCategories)
                            {
                                <li class="m-1 pointer-event" onclick="this.form.submit()">
                                    <a class="text-decoration-none" style="color: black" asp-route-pageIndex="@Model.pageIndex" asp-route-pageSize="@Model.pageSize" asp-route-textSearch="@Model.textSearch" asp-route-subCategory="@(item.SubCategoryId)">
                                        @(item.SubCategoryName)
                                    </a>
                                </li>
                            }
                        </ul>
                    </form>
                </div>
            </div>
            @if (Model.TotalCount > 0)
            {
                <div class="col-lg-9" style="overflow-x: auto; background-color: #fff; border-radius: 10px; padding:10px;margin-left:10px">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th class="tbProductName" scope="col">
                                    Tên sản phẩm
                                </th>
                                <th class="tbImportPrice" scope="col">
                                    Giá nhập
                                </th>
                                <th class="tbUnitPrice" scope="col">
                                    Đơn giá
                                </th>
                                <th style="display:none" class="tbUnitInStock">
                                    Giá tại cửa hàng
                                </th>
                                <th style="display:none">
                                    @Html.DisplayNameFor(model => model.Product[0].HaveDate)
                                </th>
                                <th style="display:none">
                                    @Html.DisplayNameFor(model => model.Product[0].DateOfManufacture)
                                </th>
                                <th style="display:none">
                                    @Html.DisplayNameFor(model => model.Product[0].Expiry)
                                </th>
                                <th style="display:none" class="tbTrademark">
                                    Thương hiệu
                                </th>
                                <th style="display:none" class="tbWeight">
                                    Trọng lượng
                                </th>
                                <th class="tbLocation">
                                    Vị trí
                                </th>
                                <th style="display:none" class="tbUnit">
                                    Đơn vị
                                </th>
                                <th style="display:none" class="tbInventoryLevelMin">
                                    Định mức tồn min
                                </th>
                                <th style="display:none" class="tbInventoryLevelMax">
                                    Định mức tồn max
                                </th>
                                <th style="display:none" class="tbDescription">
                                    Miêu tả
                                </th>
                                <th class="tbSubCategory">
                                    Loại sản phẩm
                                </th>
                                <th>
                                    Nhà cung cấp
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Product)
                            {
                                <tr>
                                    <td class="tbProductName">
                                        @Html.DisplayFor(modelItem => item.ProductName)
                                    </td>
                                    <td class="tbImportPrice">
                                        @Html.DisplayFor(modelItem => item.ImportPrice)
                                    </td>
                                    <td class="tbUnitPrice">
                                        @Html.DisplayFor(modelItem => item.UnitPrice)
                                    </td>
                                    <td style="display:none" class="tbUnitInStock">
                                        @Html.DisplayFor(modelItem => item.UnitInStock)
                                    </td>
                                    <td style="display:none">
                                        @Html.DisplayFor(modelItem => item.HaveDate)
                                    </td>
                                    <td style="display:none">
                                        @Html.DisplayFor(modelItem => item.DateOfManufacture)
                                    </td>
                                    <td style="display:none">
                                        @Html.DisplayFor(modelItem => item.Expiry)
                                    </td>
                                    <td style="display:none" class="tbTrademark">
                                        @Html.DisplayFor(modelItem => item.Trademark)
                                    </td>
                                    <td style="display:none" class="tbWeight">
                                        @Html.DisplayFor(modelItem => item.Weight)
                                    </td>
                                    <td id="tbLocation">
                                        @Html.DisplayFor(modelItem => item.Location)
                                    </td>
                                    <td style="display:none" class="tbUnit">
                                        @Html.DisplayFor(modelItem => item.Unit)
                                    </td>
                                    <td style="display:none" class="tbInventoryLevelMin">
                                        @Html.DisplayFor(modelItem => item.InventoryLevelMin)
                                    </td>
                                    <td style="display:none" class="tbInventoryLevelMax">
                                        @Html.DisplayFor(modelItem => item.InventoryLevelMax)
                                    </td>
                                    <td style="display:none" class="tbDescription">
                                        @Html.DisplayFor(modelItem => item.Description)
                                    </td>
                                    <td class="tbSubCategory">
                                        @Html.DisplayFor(modelItem => item.SubCategory.SubCategoryName)
                                    </td>
                                    <td >
                                        @Html.DisplayFor(modelItem => item.Supplier.CompanyName)
                                    </td>
                                    <td>
                                        <a onclick="getProductDetail(@(item.ProductId))" >Chi tiết</a> |
                                        @*<a asp-page="./Details" asp-route-productID="@item.ProductId">Chi tiết</a> |*@
                                        <a class="bi bi-6-square-fill" asp-page="./Delete" asp-route-id="@item.ProductId">xóa</a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                    <div class="text-center mt-5">
                        <div class="pagination">
                            <ul class="pagination">
                                @if (Model.pageIndex > 1)
                                {
                                    <li class="page-item"><a class="page-link" asp-page="./Index" asp-route-pageIndex="@(Model.pageIndex - 1)">Trước</a></li>
                                }
                                @for (int i = 1; i <= Math.Ceiling(Model.TotalCount / (double)Model.pageSize); i++)
                                {
                                    <li class="page-item @(Model.pageIndex == i ? "active" : "")"><a class="page-link" asp-page="./Index" asp-route-pageIndex="@i" asp-route-pageSize="@Model.pageSize" asp-route-textSearch="@Model.textSearch" asp-route-subCategory="@Model.subCategoryID">@i</a></li>
                                }
                                @if (Model.pageIndex < Math.Ceiling(Model.TotalCount / (double)Model.pageSize))
                                {
                                    <li class="page-item"><a class="page-link" asp-page="./Index" asp-route-pageIndex="@(Model.pageIndex + 1)">Sau</a></li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            }
            else
            {
                <div class="col-lg-9 text-center" style="overflow-x: auto; background-color: #fff; border-radius: 10px; padding:10px;margin-left:10px">
                    <i>Không có sản phẩm nào phù hợp</i>
                </div>
            }
        </div>
    </div>
    <script>
        function modal(id, position, transform) {
            var box = document.getElementById(id);
            var modal = document.getElementsByClassName('modal');
            modal[position].style.transform = transform;
            box.style.transform = transform;
        }
        

        function showProperty(id) {

            $('.'+id).toggle();
        }

        function showInsertDate(){
            if ($(".checkBoxDate").prop('checked')) {
                $('.checkBoxDate').prop('checked', false)
            } else {
                console.log("check box")
                $('.checkBoxDate').prop('checked', true)
            }
            $('.insertDate').toggle();
        }

        //function submitFormInput() {
        //    let raw_dateManu = document.getElementById("dateOfManufactureInput");
        //    let raw_expiry = document.getElementById("expiryInput");

        //    let dateManufac = new Date(raw_dateManu.value);

        //    let expiry = new Date(raw_expiry.value);

        //    let dateNow = new Date();
        //        //|| expiry < dateManufac || expiry < dateNow 
        //    if (dateManufac.getTime() > dateNow,.getTime()) {
        //        console.log("không đúng date");
        //    }
        //    let sub = document.getElementById("btnSubmit")
        //        sub.addEventListener("click", function () {
        //            document.getElementById("insertForm").submit();
        //        });
        //}

        // product details
        function getProductDetail(productID) {
            $.ajax({
                url: "/WarehouseStaff/Products/Details",
                type: "GET",
                data: { productID: productID },
                success: function (data) {
                    // Gán dữ liệu vào các trường của form
                    $("#productIDUpdate").val(productID)
                    $("#productNameUpdate").val(data.productName);
                    $("#importPriceUpdate").val(data.importPrice);
                    $("#unitInStockUpdate").val(data.unitInStock);
                    $("#trademarkUpdate").val(data.trademark);
                    $("#weightUpdate").val(data.weight);
                    $("#locationUpdate").val(data.location);
                    $("#unitUpdate").val(data.unit);
                    $("#unitPriceUpdate").val(data.unitPrice);
                    $("#inventoryLevelMinUpdate").val(data.inventoryLevelMin);
                    $("#inventoryLevelMaxUpdate").val(data.inventoryLevelMax);
                    $("#descriptionUpdate").val(data.description);
                    $("#subCategoryUpdate").val(data.subCategoryId);
                    $("#supplierIDUpdate").val(data.supplierId);
                    if (data.haveDate) {
                        $('#checkBoxDateUpdate').prop('checked', true);
                        $('.insertDate').show();
                        $("#expiryUpdate").val(formatDate(data.expiry));
                        $("#dateOfManufactureUpdate").val(formatDate(data.dateOfManufacture));
                    }else{
                        $('#checkBoxDate').prop('checked', false);
                    }
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log(textStatus, errorThrown);
                },
                 beforeSend: function(xhr) {
                 xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
              }
            });
            modal('update-product-modal', 2, 'scale(1)')
        }
        //format date
        function formatDate(date) {
            var d = new Date(date),
                month = '' + (d.getMonth() + 1),
                day = '' + d.getDate(),
                year = d.getFullYear();

            if (month.length < 2)
                month = '0' + month;
            if (day.length < 2)
                day = '0' + day;

            return [year, month, day].join('-');
        }

        //delete Product
        function DeleteProduct() {
            var productID = $("#productIDUpdate").val().toString();
            console.log(productID);
            if (confirm("Bạn có chắc chắn muốn xóa sản phẩm này không?")) {
                $.ajax({
                    url: '/WarehouseStaff/Products/Delete',
                    type: 'POST',
                    data: { productID: productID },
                    success: function (data) {
                        // handle success
                         alert("Xóa sản phẩm thành công");
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log(textStatus, errorThrown);
                    }
                });
            }
        }
        //sort table
        $(document).ready(function () {
            $("th").click(function () {
                var table = $(this).parents('table').eq(0)
                var rows = table.find('tr:gt(0)').toArray().sort(comparer($(this).index()))
                this.asc = !this.asc
                if (!this.asc) { rows = rows.reverse() }
                for (var i = 0; i < rows.length; i++) { table.append(rows[i]) }
            })
            function comparer(index) {
                return function (a, b) {
                    var valA = getCellValue(a, index), valB = getCellValue(b, index)
                    return $.isNumeric(valA) && $.isNumeric(valB) ? valA - valB : valA.localeCompare(valB)
                }
            }
            function getCellValue(row, index) { return $(row).children('td').eq(index).text() }
        })
    </script>
    <script src="../../../admin/js/tabler.min.js" defer></script>
    <script src="../../../admin/js/demo.min.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/dataTables.bootstrap4.min.js"></script>
</body>
